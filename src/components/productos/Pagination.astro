---
interface Props {
  currentPage: number;
  totalPages: number;
  baseUrl: string;
}

const { currentPage, totalPages, baseUrl } = Astro.props;

// Determinar el separador correcto según si baseUrl ya tiene parámetros
const separator = baseUrl.includes("?") ? "&" : "?";

const prevUrl = currentPage > 1 ? `${baseUrl}${separator}page=${currentPage - 1}` : "#";
const nextUrl = currentPage < totalPages ? `${baseUrl}${separator}page=${currentPage + 1}` : "#";

function getPageUrl(page: number) {
  return `${baseUrl}${separator}page=${page}`;
}
---

<div class="mt-12 flex items-center justify-center">
  <nav aria-label="Pagination" class="flex items-center gap-2">
    <a
      class={`flex h-10 w-10 items-center justify-center rounded-lg border border-border-light dark:border-border-dark ${currentPage === 1 ? 'bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800 dark:text-gray-600' : 'bg-card-light dark:bg-card-dark hover:bg-gray-200 dark:hover:bg-gray-700'}`}
      href={prevUrl}
      aria-disabled={currentPage === 1}
    >
      <span class="material-symbols-outlined">chevron_left</span>
    </a>

    {
      Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (
        <a
          aria-current={page === currentPage ? "page" : undefined}
          class={`text-sm font-bold flex h-10 w-10 items-center justify-center rounded-lg ${page === currentPage ? 'bg-primary text-white' : 'bg-card-light dark:bg-card-dark border border-border-light dark:border-border-dark hover:bg-gray-200 dark:hover:bg-gray-700'}`}
          href={getPageUrl(page)}
        >
          {page}
        </a>
      ))
    }

    <a
      class={`flex h-10 w-10 items-center justify-center rounded-lg border border-border-light dark:border-border-dark ${currentPage === totalPages ? 'bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800 dark:text-gray-600' : 'bg-card-light dark:bg-card-dark hover:bg-gray-200 dark:hover:bg-gray-700'}`}
      href={nextUrl}
      aria-disabled={currentPage === totalPages}
    >
      <span class="material-symbols-outlined">chevron_right</span>
    </a>
  </nav>
</div>
